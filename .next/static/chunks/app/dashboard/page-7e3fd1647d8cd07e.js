(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{3348:(e,t,s)=>{Promise.resolve().then(s.bind(s,1789))},1789:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n});var l=s(7437),a=s(2265),i=s(998);let n=()=>{let{data:e}=(0,i.useSession)(),[t,s]=(0,a.useState)([]),[n,o]=(0,a.useState)(!1),[r,c]=(0,a.useState)(""),[d,u]=(0,a.useState)(""),[h,x]=(0,a.useState)(""),f=async()=>{if(e){let t=e.user.id,l=await fetch("/api/notes?userId=".concat(t));l.ok?s(await l.json()):console.error("Failed to fetch notes:",l.statusText)}};(0,a.useEffect)(()=>{f()},[e]);let m=()=>{c(""),u(""),x("")},p=async t=>{if(t.preventDefault(),!e){console.error("User is not logged in");return}let s={title:r,content:d,userId:e.user.id};h?await fetch("/api/notes/".concat(h),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}):await fetch("/api/notes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),m(),f(),o(!1)},b=e=>{c(e.title),u(e.content),x(e.id),o(!0)},j=async e=>{let t=await fetch("/api/notes/".concat(e),{method:"DELETE"});t.ok?f():console.error("Failed to delete note:",t.statusText)};return(0,l.jsx)("div",{className:"flex flex-col w-full h-full",children:(0,l.jsxs)("div",{className:"flex-1 p-6 overflow-auto",children:[(0,l.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,l.jsx)("button",{onClick:()=>{m(),o(!0)},className:"bg-blue-600 text-white px-4 py-1 rounded",children:"Add Note"})}),(0,l.jsx)("div",{className:"grid grid-cols-3 gap-2",children:Array.isArray(t)&&t.map(e=>(0,l.jsxs)("div",{className:"bg-blue-200 p-4 rounded shadow-lg h-52 flex flex-col overflow-hidden",children:[(0,l.jsxs)("div",{className:"flex-1 overflow-y-auto no-scrollbar max-h-32 w-52",children:[(0,l.jsx)("h3",{className:"font-semibold text-lg",children:e.title}),(0,l.jsx)("p",{className:"p-2",children:e.content})]}),(0,l.jsxs)("div",{className:"flex mt-6 justify-between",children:[(0,l.jsx)("button",{onClick:()=>b(e),className:"text-blue-600 flex items-center",children:"Edit"}),(0,l.jsx)("button",{onClick:()=>j(e.id),className:"text-red-600 flex items-center",children:"Delete"})]})]},e.id))}),n&&(0,l.jsx)("div",{className:"fixed inset-0 flex items-center justify-center bg-black bg-opacity-50",children:(0,l.jsxs)("div",{className:"bg-white p-6 rounded shadow-lg",children:[(0,l.jsx)("h2",{className:"text-lg font-semibold mb-4",children:h?"Edit Note":"Add Note"}),(0,l.jsxs)("form",{onSubmit:p,children:[(0,l.jsx)("input",{type:"text",value:r,onChange:e=>c(e.target.value),placeholder:"Title",className:"border p-2 mb-2 w-full",required:!0}),(0,l.jsx)("textarea",{value:d,onChange:e=>u(e.target.value),placeholder:"Description",className:"border p-2 mb-4 w-full",required:!0}),(0,l.jsxs)("div",{className:"flex justify-end",children:[(0,l.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-4 py-2 rounded mr-2",children:"Save"}),(0,l.jsx)("button",{type:"button",onClick:()=>{m(),o(!1)},className:"bg-gray-400 text-white px-4 py-2 rounded",children:"Cancel"})]})]})]})})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[998,130,215,744],()=>t(3348)),_N_E=e.O()}]);